!function(){"use strict";var t=window,e=t.GHOSTKIT,o=t.jQuery,i=o(document);function n(){o(".ghostkit-video-fullscreen:visible .ghostkit-video-fullscreen-frame").each((function(){var t,e,i=o(this),n=i.data("ghostkit-video-aspect-ratio")||16/9;n>window.innerWidth/window.innerHeight?e=(t=.9*window.innerWidth)/n:t=(e=.9*window.innerHeight)*n,i.css({width:t,height:e,top:(window.innerHeight-e)/2,left:(window.innerWidth-t)/2})}))}var a,l,s,r,d=function(t,e,o,i){var n,a=!1,l=0;function s(){n&&clearTimeout(n)}function r(){for(var r=arguments.length,d=new Array(r),c=0;c<r;c++)d[c]=arguments[c];var u=this,v=Date.now()-l;function f(){l=Date.now(),o.apply(u,d)}function p(){n=void 0}a||(i&&!n&&f(),s(),void 0===i&&v>t?f():!0!==e&&(n=setTimeout(i?p:f,void 0===i?t-v:t)))}return"boolean"!=typeof e&&(i=o,o=e,e=void 0),r.cancel=function(){s(),a=!0},r}(200,(a=function(){n()},l=[],s=null,(r=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];l=e,s||(s=requestAnimationFrame((function(){s=null,a.apply(void 0,l)})))}).cancel=function(){s&&(cancelAnimationFrame(s),s=null)},r));o(window).on("DOMContentLoaded load resize orientationchange",(function(){d()})),i.on("initBlocks.ghostkit",(function(t,i){void 0!==window.VideoWorker&&(e.triggerEvent("beforePrepareVideo",i),o(".ghostkit-video:not(.ghostkit-video-ready)").each((function(){var t=o(this).addClass("ghostkit-video-ready"),e=t.attr("data-video"),a=t.attr("data-click-action"),l="true"===t.attr("data-video-autoplay"),s="true"===t.attr("data-video-autopause"),r="true"===t.attr("data-video-loop"),d=t.find(".ghostkit-video-fullscreen-close-icon");d=d.length?d.html():t.attr("data-fullscreen-action-close-icon")?'<span class="'.concat(t.attr("data-fullscreen-action-close-icon"),'"></span>'):"";var c=t.attr("data-fullscreen-background-color"),u=t.find(".ghostkit-video-poster"),v=!1,f=!1,p=0,g=t.attr("data-video-aspect-ratio");g=g&&g.split(":")[0]&&g.split(":")[1]?g.split(":")[0]/g.split(":")[1]:16/9,parseFloat(t.attr("data-video-volume"))||(p=1),l&&(p=1);var h=new window.VideoWorker(e,{autoplay:0,loop:r,mute:p,volume:parseFloat(t.attr("data-video-volume"))||0,showContols:1});if(h&&h.isValid()){var k=0,w=0,m=!1;t.on("click",(function(){w||(w=1,"fullscreen"===a?k?v&&(v.fadeIn(200),h.play()):(t.addClass("ghostkit-video-loading"),h.getIframe((function(t){var e=(f=o(t)).parent();(v=o('<div class="ghostkit-video-fullscreen" style="background-color: '.concat(c,';">')).appendTo("body").append(o('<div class="ghostkit-video-fullscreen-close">'.concat(d,"</div>"))).append(o('<div class="ghostkit-video-fullscreen-frame">').append(f))).data("ghostkit-video-aspect-ratio",g),e.remove(),v.fadeIn(200),v.on("click",(function(t){var e=o(t.target);(e.hasClass("ghostkit-video-fullscreen")||e.hasClass("ghostkit-video-fullscreen-close")||e.closest(".ghostkit-video-fullscreen-close").length)&&(h.pause(),v.fadeOut(200))})),n(),h.play()})),k=1):k?h.play():(t.addClass("ghostkit-video-loading"),h.getIframe((function(e){var i=(f=o(e)).parent();o('<div class="ghostkit-video-frame">').appendTo(t).append(f),i.remove(),h.play()})),k=1))})),u.length||t.hasClass("is-style-icon-only")||h.getImageURL((function(e){u=o('<div class="ghostkit-video-poster"><img src="'.concat(e,'" alt=""></div>')),t.append(u)}));var y=!1;h.on("ready",(function(){t.removeClass("ghostkit-video-loading"),"fullscreen"!==a&&t.addClass("ghostkit-video-playing"),h.play()})),h.on("play",(function(){m=!0})),h.on("pause",(function(){m=!1,y=!0,"fullscreen"===a&&(w=0)})),"fullscreen"!==a&&(l||s)&&i.throttleScroll((function(){!y&&!m&&l&&i.isElementInViewport(t[0],.6)&&(w?h.play():t.click()),m&&s&&!i.isElementInViewport(t[0],.6)&&h.pause()}))}})),e.triggerEvent("afterPrepareVideo",i))}))}();